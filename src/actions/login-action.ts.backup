'use server';

import { redirect } from 'next/navigation';
import { supabaseLoginAction } from './supabase-login-action';

export async function loginAction(formData: FormData) {
  const result = await supabaseLoginAction(formData, false); // Не выполняем редирект в экшене аутентификации

  if (result.error) {
    // Если произошла ошибка, перенаправляем обратно на страницу логина с сообщением об ошибке
    redirect(`/login?error=${encodeURIComponent(result.error)}`);
  } else {
    // Если аутентификация прошла успешно, перенаправляем на админ панель
    redirect('/admin');
  }
}